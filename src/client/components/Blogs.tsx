import * as React from 'react';
import { Link } from 'react-router-dom';
import { useState, useEffect } from 'react';
import moment from 'moment';

const Blogs: React.FC = () => {

    const [blogs, setBlogs] = useState<IBlog[]>(null);

    const getBlogs = async () => {
        const r = await fetch('http://localhost:3000/api/blogs');
        const blogs = await r.json();
        setBlogs(blogs);
    }

    useEffect(() => {getBlogs(); }, [])

    return(
        <>
        {blogs?.reverse().map(blog => {
            return (
                <div key={blog?.id} className="container" id="card">
                <div className="row">
                    <div className="card col-12 mb-4" >
                        <div className="card-header">User{blog?.authorid} created {blog?.title} </div>
                        <div className="card-body">
                            <img src="data:image/jpeg;base64,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" alt=""/>
                        </div>
                        <div className="card-footer text-muted d-flex justify-content-between">
                            <p className="card-text">Last updated {moment(blog?._created).startOf('minute').fromNow()} at {moment(blog?._created).format('h:mm a')}</p>
                            <Link id="editButton" className="btn shadow" to={`/${blog?.id}`}>View Blog</Link>
                        </div>
                    </div>
                </div>
            </div>
            )
        })}
        </>
    )



}

export interface IBlog {
    id: number, 
    title: string,
    content: string,
    _created: number,
    authorid: number
}

export default Blogs;